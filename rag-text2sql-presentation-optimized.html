<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Power of Two: How RAG Elevates Text-to-SQL Accuracy</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=JetBrains+Mono:wght@300;400;600&family=Space+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/slides.css">
</head>

<body>
    <div class="progress-indicator" id="progress"></div>
    <div class="presentation">
        <!-- Slide 1: Title -->
        <div class="slide active title-slide" data-slide="1">
            <div class="slide-title">The Power of Two:<br>How RAG Elevates<br>Text-to-SQL Accuracy</div>
            <div class="subtitle">A Practical Approach for Enterprise-Scale Databases</div>
            <br>
            <div class="logo-placeholder">RAG + SQL</div>
            <div class="speaker-info" style="margin-top: 8rem;">Tech Talk Presentation | February 2026</div>
        </div>

        <!-- Slide 2: The Challenge -->
        <div class="slide" data-slide="2">
            <div class="slide-title">The Traditional Approach Falls Short</div>
            <br>
            <div class="content">
                <ul class="bullet-list">
                    <li><span class="crossmark">‚ùå</span> Injecting entire schema into every prompt</li>
                    <li><span class="crossmark">‚ùå</span> Context window overflow (50+ tables √ó 20+ columns)</li>
                    <li><span class="crossmark">‚ùå</span> Token waste & reduced accuracy</li>
                </ul>
                <div class="visual-container">
                    <div class="diagram" style="gap: 3rem;">
                        <div class="diagram-box" style="padding: 3.5rem 3rem; min-width: 330px;">
                            <div style="font-size: 4.5rem; margin-bottom: 1rem;">üìä</div>
                            <div style="font-size: 1.8rem; font-weight: 600;">300+ Tables</div>
                        </div>
                        <div class="arrow" style="font-size: 3.5rem;">‚Üí</div>
                        <div class="diagram-box" style="padding: 3.5rem 3rem; min-width: 330px;">
                            <div style="font-size: 4.5rem; margin-bottom: 1rem;">ü§ñ</div>
                            <div style="font-size: 1.8rem; font-weight: 600;">LLM Context</div>
                        </div>
                        <div class="arrow" style="font-size: 3.5rem;">‚Üí</div>
                        <div class="diagram-box error" style="padding: 3.5rem 3rem; min-width: 330px;">
                            <div style="font-size: 4.5rem; margin-bottom: 1rem;">‚ö†Ô∏è</div>
                            <div style="font-size: 1.8rem; font-weight: 600;">OVERFLOW!</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 3: The Solution -->
        <div class="slide" data-slide="3">
            <div class="slide-title">Schema Linking:<br>Retrieve, Don't Inject All</div>
            <div class="content" style="margin-top: -4rem;">
                <ul class="bullet-list">
                    <li><span class="checkmark">‚úÖ</span> Enrich schemas with semantic descriptions</li>
                    <li><span class="checkmark">‚úÖ</span> Index into Vector Database</li>
                    <li><span class="checkmark">‚úÖ</span> Retrieve only top-K relevant tables per query</li>
                </ul>
                <div class="pipeline">
                    <div class="pipeline-step">
                        <div class="step-number">1</div>
                        <div class="step-title">Enrich<br>Schema Files</div>
                    </div>
                    <div class="arrow">‚Üí</div>
                    <div class="pipeline-step">
                        <div class="step-number">2</div>
                        <div class="step-title">Index<br>Vector DB</div>
                    </div>
                    <div class="arrow">‚Üí</div>
                    <div class="pipeline-step">
                        <div class="step-number">3</div>
                        <div class="step-title">Retrieve<br>Relevant Tables</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 4: LLM Selection Problem -->
        <div class="slide" data-slide="4">
            <div class="slide-title">Not All LLMs Are<br>Created Equal for SQL</div>
            <div class="content">
                <ul class="bullet-list">
                    <li>General-purpose models (Llama, Qwen, GPT) excel at chat</li>
                    <li>SQL generation requires specialized reasoning</li>
                    <li>Benchmark evidence matters</li>
                </ul>
                <div class="chart-container">
                    <div class="bar-chart">
                        <div class="bar-row">
                            <div class="bar-label">OmniSQL-14B</div>
                            <div class="bar" style="width: 71.2%;">
                                <div class="bar-value">71.2%</div>
                            </div>
                        </div>
                        <div class="bar-row">
                            <div class="bar-label">SQLCoder-8B</div>
                            <div class="bar" style="width: 68.9%;">
                                <div class="bar-value">68.9%</div>
                            </div>
                        </div>
                        <div class="bar-row">
                            <div class="bar-label">GPT-4o</div>
                            <div class="bar" style="width: 68.4%;">
                                <div class="bar-value">68.4%</div>
                            </div>
                        </div>
                        <div class="bar-row">
                            <div class="bar-label">Qwen2.5-72B</div>
                            <div class="bar" style="width: 58.1%;">
                                <div class="bar-value">58.1%</div>
                            </div>
                        </div>
                    </div>
                    <div
                        style="margin-top: 1rem; font-family: var(--font-mono); font-size: 0.85rem; color: var(--color-secondary); text-align: center;">
                        Bird-SQL Benchmark Performance (Execution Accuracy)
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 5: SQL-Specialized Models -->
        <div class="slide" data-slide="5">
            <div class="slide-title">Enter SQL-Specialized LLMs</div>
            <div class="content">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">71.2%</div>
                        <div class="stat-label">OmniSQL Bird-SQL</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">87.1%</div>
                        <div class="stat-label">OmniSQL Spider</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">14B</div>
                        <div class="stat-label">Parameters</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">‚úì</div>
                        <div class="stat-label">Self-Hostable</div>
                    </div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Model</th>
                                <th>Size</th>
                                <th>Bird-SQL EX</th>
                                <th>Spider EX</th>
                                <th>Self-Host</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>OmniSQL</td>
                                <td>14B</td>
                                <td>71.2%</td>
                                <td>87.1%</td>
                                <td>‚úÖ Ollama</td>
                            </tr>
                            <tr>
                                <td>SQLCoder</td>
                                <td>8B</td>
                                <td>68.9%</td>
                                <td>84.5%</td>
                                <td>‚úÖ Ollama</td>
                            </tr>
                            <tr>
                                <td>GPT-4o</td>
                                <td>?</td>
                                <td>68.4%</td>
                                <td>85.3%</td>
                                <td>‚ùå API</td>
                            </tr>
                            <tr>
                                <td>Qwen2.5</td>
                                <td>72B</td>
                                <td>58.1%</td>
                                <td>79.2%</td>
                                <td>‚úÖ Heavy</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Slide 6: OmniSQL Benchmark -->
        <div class="slide" data-slide="6">
            <div class="slide-title">OmniSQL Benchmark</div>
            <div class="content"
                style="display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 2rem;">
                <div style="text-align: center;">
                    <img src="images/omnisql_benchmark.png" alt="OmniSQL Benchmark Table">
                </div>
                <div class="highlight-box" style="margin-top: 0;">
                    OmniSQL outperforms general-purpose LLMs by 3-13% on SQL benchmarks
                </div>
            </div>
        </div>

        <!-- Slide 7: System Architecture -->
        <div class="slide" data-slide="7">
            <div class="slide-title">End-to-End<br>System Architecture</div>
            <div class="content">
                <div class="architecture-grid">
                    <div class="arch-component">1. User Query Input</div>
                    <div class="arch-component">2. Query Enhancement</div>
                    <div class="arch-component">3. Column-First RAG</div>
                    <div class="arch-component">4. Anchor Tables</div>
                    <div class="arch-component">5. Table Expansion</div>
                    <div class="arch-component">6. Schema Context</div>
                    <div class="arch-component">7. SQL Generation</div>
                    <div class="arch-component">8. T-SQL Correction</div>
                    <div class="arch-component">9. Self-Healing</div>
                    <div class="arch-component">10. Response Format</div>
                </div>
                <div class="highlight-box">
                    Complete pipeline from natural language to validated T-SQL with automated error recovery
                </div>
            </div>
        </div>

        <!-- Slide 8: Schema Enrichment -->
        <div class="slide" data-slide="8">
            <div class="slide-title">Auto-Enrichment with<br>Human Review</div>
            <div class="content">
                <div class="comparison">
                    <div class="comparison-side bad">
                        <div class="comparison-title">BEFORE (Raw DDL)</div>
                        <div class="code-block">CREATE TABLE Person (<br>
                            PersonID INT PRIMARY KEY,<br>
                            FirstName NVARCHAR(50),<br>
                            Gender NVARCHAR(1)<br>
                            );</div>
                    </div>
                    <div class="comparison-side good">
                        <div class="comparison-title">AFTER (Enriched)</div>
                        <div class="code-block">Table: Person<br>
                            Description: "Core entity storing<br>
                            employee and contact information"<br><br>
                            Columns:<br>
                            - PersonID: Unique identifier (PK)<br>
                            - FirstName: Given name<br>
                            - Gender: M=Male, F=Female, U=Unknown<br>
                              + Tags: ["sex", "sexual"]</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 9: Indexing Strategy -->
        <div class="slide" data-slide="9">
            <div class="slide-title">Dual-Collection<br>Indexing Strategy</div>
            <div class="content">
                <div class="two-column">
                    <div>
                        <div class="metric-card">
                            <div class="metric-title">Collection 1: Column Metadata</div>
                            <div>Fine-grained column-level indexing</div>
                            <div class="metric-formula">Embed: "column_name + description + tags"</div>
                        </div>
                    </div>
                    <div>
                        <div class="metric-card">
                            <div class="metric-title">Collection 2: Table Metadata</div>
                            <div>Coarse-grained table-level indexing</div>
                            <div class="metric-formula">Embed: "table_name + semantic_description"</div>
                        </div>
                    </div>
                </div>
                <div class="highlight-box">
                    Separate embedding spaces enable both precision and recall optimization
                </div>
            </div>
        </div>

        <!-- Slide 10: Column-First Retrieval -->
        <div class="slide" data-slide="10">
            <div class="slide-title">Why Column-First Search?</div>
            <div class="content">
                <ul class="bullet-list">
                    <li>User queries often mention column-level concepts</li>
                    <li>More granular matching = higher recall</li>
                    <li>Columns aggregate to tables (bottom-up approach)</li>
                </ul>
                <div class="comparison">
                    <div class="comparison-side good">
                        <div class="comparison-title">Column-First ‚úì</div>
                        <div class="code-block">Query: "orders in January 2024"<br><br>
                            1. Search columns ‚Üí<br>
                            "OrderDate" (0.89)<br>
                            "PlacedDate" (0.85)<br><br>
                            2. Aggregate to tables ‚Üí<br>
                            SalesOrder (2 hits)<br><br>
                            3. Return: SalesOrder</div>
                    </div>
                    <div class="comparison-side bad">
                        <div class="comparison-title">Table-First ‚úó</div>
                        <div class="code-block">Query: "orders in January 2024"<br><br>
                            1. Search tables ‚Üí<br>
                            "SalesOrderHeader" (0.45)<br>
                            (missed due to name mismatch)<br><br>
                            ‚ùå May miss relevant table<br>
                            because "orders" doesn't<br>
                            match "SalesOrderHeader"</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 11: Anchor Table Identification -->
        <div class="slide" data-slide="11">
            <div class="slide-title">From Columns to<br>Anchor Tables</div>
            <div class="content">
                <div class="flowchart">
                    <div class="flow-step">
                        <strong>Step 1:</strong> For each column hit, aggregate score to parent table
                    </div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">
                        <strong>Step 2:</strong> Sort tables by aggregated score (descending)
                    </div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">
                        <strong>Step 3:</strong> Return top-K tables as Anchors (default K=5)
                    </div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Table</th>
                                <th>Column Hits</th>
                                <th>Aggregate Score</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>SalesOrderHeader</td>
                                <td>OrderDate (0.89) + Status (0.72)</td>
                                <td><strong>1.61</strong></td>
                            </tr>
                            <tr>
                                <td>Customer</td>
                                <td>Name (0.65)</td>
                                <td>0.65</td>
                            </tr>
                            <tr>
                                <td>Product</td>
                                <td>(none)</td>
                                <td>0.00</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Slide 12: Related Table Expansion -->
        <div class="slide" data-slide="12">
            <div class="slide-title">Finding Related Tables<br>via FK Traversal</div>
            <div class="content">
                <div class="metric-card">
                    <div class="metric-title">Scoring Formula</div>
                    <div class="code-block">Related Score = Base Score + Bridge Bonus + Keyword Bonus<br><br>
                        Base Score = 0.5 √ó max(AnchorScore)<br>
                        Bridge Bonus = +1.0 if connected to >1 anchor<br>
                        Keyword Bonus = +0.5 if matches query tokens</div>
                </div>
                <div class="diagram">
                    <div class="diagram-box success">
                        Anchor Table 1<br>
                        <small>(Score: 1.61)</small>
                    </div>
                    <div class="arrow">‚ü∑</div>
                    <div class="diagram-box">
                        Related Table<br>
                        <small>(via FK)</small>
                    </div>
                    <div class="arrow">‚ü∑</div>
                    <div class="diagram-box success">
                        Anchor Table 2<br>
                        <small>(Score: 1.25)</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 13: Schema Pruning -->
        <div class="slide" data-slide="13">
            <div class="slide-title">Smart Context<br>Optimization</div>
            <div class="content">
                <div class="comparison">
                    <div class="comparison-side bad">
                        <div class="comparison-title">BEFORE (Full Schema)</div>
                        <div class="code-block">CREATE TABLE SalesOrder (<br>
                            OrderID INT PRIMARY KEY,<br>
                            <span style="text-decoration: line-through; opacity: 0.5;">RowGuid
                                uniqueidentifier,</span><br>
                            <span style="text-decoration: line-through; opacity: 0.5;">ModifiedDate datetime,</span><br>
                            <span style="text-decoration: line-through; opacity: 0.5;">CreatedBy int,</span><br>
                            OrderDate DATE,<br>
                            Status VARCHAR(20)<br>
                            );
                        </div>
                    </div>
                    <div class="comparison-side good">
                        <div class="comparison-title">AFTER (Optimized)</div>
                        <div class="code-block">CREATE TABLE SalesOrder (<br>
                            OrderID INT PRIMARY KEY,<br>
                            OrderDate DATE,<br>
                            Status VARCHAR(20), -- Samples: ['Pending','Shipped']<br>
                            );</div>
                    </div>
                </div>
                <div class="highlight-box">
                    <span class="checkmark">‚úÖ</span> Pruning: Remove low-value columns (IDs, timestamps, system
                    cols)<br>
                    <span class="checkmark">‚úÖ</span> Sample Injection: Add real values for search columns
                </div>
            </div>
        </div>

        <!-- Slide 14: T-SQL Auto-Correction -->
        <div class="slide" data-slide="14">
            <div class="slide-title">Enforcing T-SQL<br>Syntax Compliance</div>
            <div class="content">
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>MySQL/PostgreSQL</th>
                                <th>T-SQL Correction</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>LIMIT 10</code></td>
                                <td><code>SELECT TOP 10</code></td>
                            </tr>
                            <tr>
                                <td><code>string1 || string2</code></td>
                                <td><code>CONCAT(string1, string2)</code></td>
                            </tr>
                            <tr>
                                <td><code>NOW()</code></td>
                                <td><code>GETDATE()</code></td>
                            </tr>
                            <tr>
                                <td><code>IF(cond, a, b)</code></td>
                                <td><code>IIF(cond, a, b)</code></td>
                            </tr>
                            <tr>
                                <td><code>table.group</code></td>
                                <td><code>table.[group]</code></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="highlight-box">
                    Rule-based validator + transformer auto-corrects common mistakes before execution
                </div>
            </div>
        </div>

        <!-- Slide 15: Self-Healing Loop -->
        <div class="slide" data-slide="15">
            <div class="slide-title">Execute, Diagnose,<br>Heal, Retry</div>
            <div class="content">
                <div class="flowchart">
                    <div class="flow-step">Execute SQL against read-only connection</div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">Capture error messages if execution fails</div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">Feed error back to LLM for correction</div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">Retry up to N times (default: 5)</div>
                </div>
                <div class="code-block">Attempt 1: "Invalid object name 'Orders'"<br>
                    ‚Üí LLM Fix: Add schema prefix "Sales.Orders"<br><br>
                    Attempt 2: "Invalid column name 'Qty'"<br>
                    ‚Üí LLM Fix: Change to "OrderQty"<br><br>
                    Attempt 3: ‚úÖ Success!</div>
                <div class="highlight-box warning">
                    ‚ö†Ô∏è Security Note: Always use READ-ONLY database credentials
                </div>
            </div>
        </div>

        <!-- Slide 16: Gold Dataset -->
        <div class="slide" data-slide="16">
            <div class="slide-title">Building Your<br>Evaluation Gold Standard</div>
            <div class="content">
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Column</th>
                                <th>Purpose</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>question</td>
                                <td>Natural language query</td>
                            </tr>
                            <tr>
                                <td>gold_sql</td>
                                <td>Human-verified correct SQL</td>
                            </tr>
                            <tr>
                                <td>gold_tables</td>
                                <td>Tables that should be retrieved</td>
                            </tr>
                            <tr>
                                <td>expected_record_count</td>
                                <td>Number of rows expected</td>
                            </tr>
                            <tr>
                                <td>expected_pks</td>
                                <td>Primary key values for verification</td>
                            </tr>
                            <tr>
                                <td>difficulty</td>
                                <td>basic / intermediate / advanced</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="highlight-box">
                    Generate question-SQL pairs covering all difficulty levels with expected results & metadata.
                    <strong>Human review is mandatory.</strong>
                </div>
            </div>
        </div>

        <!-- Slide 17: Basic SQL Dataset Samples -->
        <div class="slide" data-slide="17">
            <div class="slide-title">Basic SQL<br>Dataset Samples</div>
            <div class="content">
                <div class="table-container" style="max-height: 500px; overflow-y: auto;">
                    <table>
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Question</th>
                                <th>Query</th>
                                <th>Tables</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>List all departments</td>
                                <td style="font-size: 1.2rem;">SELECT * FROM HumanResources.Department;</td>
                                <td>HumanResources.Department</td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td>Retrieve names of all products</td>
                                <td style="font-size: 1.2rem;">SELECT Name FROM Production.Product;</td>
                                <td>Production.Product</td>
                            </tr>
                            <tr>
                                <td>11</td>
                                <td>Get total employees in company</td>
                                <td style="font-size: 1.2rem;">SELECT COUNT(*) FROM HumanResources.Employee;</td>
                                <td>HumanResources.Employee</td>
                            </tr>
                            <tr>
                                <td>18</td>
                                <td>Find highest list price</td>
                                <td style="font-size: 1.2rem;">SELECT MAX(ListPrice) FROM Production.Product;</td>
                                <td>Production.Product</td>
                            </tr>
                            <tr>
                                <td>23</td>
                                <td>Find all departments in manufacturing</td>
                                <td style="font-size: 1.2rem;">SELECT * FROM HumanResources.Department WHERE GroupName =
                                    'Manufacturing';</td>
                                <td>HumanResources.Department</td>
                            </tr>
                            <tr>
                                <td>33</td>
                                <td>Count how many products are red</td>
                                <td style="font-size: 1.2rem;">SELECT COUNT(*) FROM Production.Product WHERE Color =
                                    'Red';</td>
                                <td>Production.Product</td>
                            </tr>
                            <tr>
                                <td>40</td>
                                <td>Show top 5 most expensive products</td>
                                <td style="font-size: 1.2rem;">SELECT TOP 5 Name, ListPrice FROM Production.Product
                                    ORDER BY ListPrice DESC;</td>
                                <td>Production.Product</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="highlight-box">
                    <span class="checkmark">‚úÖ</span> Basic SQL Queries | Single-table operations | Filtering &
                    Aggregation
                </div>
            </div>
        </div>

        <!-- Slide 18: Intermediate SQL Dataset Samples -->
        <div class="slide" data-slide="18">
            <div class="slide-title">Intermediate SQL<br>Dataset Samples</div>
            <div class="content">
                <div class="table-container" style="max-height: 500px; overflow-y: auto;">
                    <table>
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Question</th>
                                <th>Query</th>
                                <th>Tables</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>201</td>
                                <td>Total sales per territory</td>
                                <td style="font-size: 1.2rem;">SELECT st.Name, SUM(soh.SubTotal) AS TotalSales FROM
                                    Sales.SalesOrderHeader soh JOIN Sales.SalesTerritory st ON soh.TerritoryID =
                                    st.TerritoryID GROUP BY st.Name;</td>
                                <td>SalesOrderHeader, SalesTerritory</td>
                            </tr>
                            <tr>
                                <td>207</td>
                                <td>Calculate running total of sales</td>
                                <td style="font-size: 1.2rem;">SELECT SalesOrderID, OrderDate, SubTotal, SUM(SubTotal)
                                    OVER(ORDER BY OrderDate, SalesOrderID) AS RunningTotal FROM Sales.SalesOrderHeader;
                                </td>
                                <td>SalesOrderHeader</td>
                            </tr>
                            <tr>
                                <td>215</td>
                                <td>Products sold in >10 orders</td>
                                <td style="font-size: 1.2rem;">SELECT ProductID, COUNT(DISTINCT SalesOrderID) AS
                                    OrderCount FROM Sales.SalesOrderDetail GROUP BY ProductID HAVING COUNT(DISTINCT
                                    SalesOrderID) > 10;</td>
                                <td>SalesOrderDetail</td>
                            </tr>
                            <tr>
                                <td>225</td>
                                <td>Calculate total sales per year (CTE)</td>
                                <td style="font-size: 1.2rem;">WITH YearlySales AS (SELECT YEAR(OrderDate) AS SaleYear,
                                    TotalDue FROM Sales.SalesOrderHeader) SELECT SaleYear, SUM(TotalDue) AS AnnualTotal
                                    FROM YearlySales GROUP BY SaleYear;</td>
                                <td>SalesOrderHeader</td>
                            </tr>
                            <tr>
                                <td>237</td>
                                <td>Products sold in every territory</td>
                                <td style="font-size: 1.2rem;">SELECT ProductID FROM Sales.SalesOrderDetail sod JOIN
                                    Sales.SalesOrderHeader soh ON sod.SalesOrderID = soh.SalesOrderID GROUP BY ProductID
                                    HAVING COUNT(DISTINCT soh.TerritoryID) = (SELECT COUNT(*) FROM
                                    Sales.SalesTerritory);</td>
                                <td>SalesOrderDetail, SalesOrderHeader, SalesTerritory</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="highlight-box">
                    <span class="checkmark">‚úÖ</span> Intermediate Queries | JOINs | Window Functions | CTEs | Subqueries
                </div>
            </div>
        </div>

        <!-- Slide 19: Advanced SQL Dataset Samples -->
        <div class="slide" data-slide="19">
            <div class="slide-title">Advanced SQL<br>Dataset Samples</div>
            <div class="content">
                <div class="table-container" style="max-height: 500px; overflow-y: auto;">
                    <table>
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Question</th>
                                <th>Query</th>
                                <th>Tables</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>301</td>
                                <td>Management hierarchy (Recursive CTE)</td>
                                <td style="font-size: 1.2rem;">WITH Emp_CTE AS (SELECT BusinessEntityID,
                                    OrganizationNode, OrganizationLevel, JobTitle, CAST(JobTitle AS nvarchar(MAX)) AS
                                    HierarchyPath FROM HumanResources.Employee WHERE OrganizationLevel = 0 UNION ALL
                                    SELECT e.BusinessEntityID, e.OrganizationNode, e.OrganizationLevel, e.JobTitle,
                                    ecte.HierarchyPath + ' -> ' + e.JobTitle FROM HumanResources.Employee e INNER JOIN
                                    Emp_CTE ecte ON e.OrganizationNode.GetAncestor(1) = ecte.OrganizationNode) SELECT *
                                    FROM Emp_CTE;</td>
                                <td>HumanResources.Employee</td>
                            </tr>
                            <tr>
                                <td>303</td>
                                <td>Pivot sales by year and territory</td>
                                <td style="font-size: 1.2rem;">SELECT * FROM (SELECT YEAR(soh.OrderDate) AS [Year],
                                    st.[Group], soh.TotalDue FROM Sales.SalesOrderHeader soh JOIN Sales.SalesTerritory
                                    st ON soh.TerritoryID = st.TerritoryID) AS SourceTable PIVOT (SUM(TotalDue) FOR
                                    [Group] IN ([North America], [Europe], [Pacific])) AS PivotTable;</td>
                                <td>SalesOrderHeader, SalesTerritory</td>
                            </tr>
                            <tr>
                                <td>307</td>
                                <td>3-month moving average of sales</td>
                                <td style="font-size: 1.2rem;">WITH MonthlySales AS (SELECT CAST(FORMAT(OrderDate,
                                    'yyyy-MM-01') AS date) AS MonthStart, SUM(TotalDue) AS MonthlyTotal FROM
                                    Sales.SalesOrderHeader GROUP BY FORMAT(OrderDate, 'yyyy-MM-01')) SELECT MonthStart,
                                    MonthlyTotal, AVG(MonthlyTotal) OVER (ORDER BY MonthStart ROWS BETWEEN 2 PRECEDING
                                    AND CURRENT ROW) AS MovingAvg FROM MonthlySales;</td>
                                <td>SalesOrderHeader</td>
                            </tr>
                            <tr>
                                <td>318</td>
                                <td>Cumulative % of revenue by product</td>
                                <td style="font-size: 1.2rem;">WITH Sales AS (SELECT ProductID, SUM(LineTotal) AS
                                    ProdTotal FROM Sales.SalesOrderDetail GROUP BY ProductID), Tot AS (SELECT
                                    SUM(LineTotal) AS GrandTotal FROM Sales.SalesOrderDetail) SELECT s.ProductID,
                                    (s.ProdTotal / t.GrandTotal) * 100 AS Pct, SUM(s.ProdTotal) OVER (ORDER BY
                                    s.ProdTotal DESC) / t.GrandTotal * 100 AS CumulativePct FROM Sales s CROSS JOIN Tot
                                    t;</td>
                                <td>SalesOrderDetail</td>
                            </tr>
                            <tr>
                                <td>334</td>
                                <td>Pareto products (80% of revenue)</td>
                                <td style="font-size: 1.2rem;">WITH ProdRev AS (SELECT ProductID, SUM(LineTotal) AS Rev
                                    FROM Sales.SalesOrderDetail GROUP BY ProductID), RunningTotal AS (SELECT ProductID,
                                    Rev, SUM(Rev) OVER (ORDER BY Rev DESC) AS RT, SUM(Rev) OVER () AS Total FROM
                                    ProdRev) SELECT * FROM RunningTotal WHERE RT <= Total * 0.8;</td>
                                <td>SalesOrderDetail</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="highlight-box">
                    <span class="checkmark">‚úÖ</span> Advanced Queries | Recursive CTEs | PIVOT/UNPIVOT | XML | Analytics
                </div>
            </div>
        </div>

        <!-- Slide 20: Future Enhancement -->
        <div class="slide" data-slide="20">
            <div class="slide-title">Continuous Learning<br>from Expert Feedback</div>
            <div class="content">
                <div class="flowchart">
                    <div class="flow-step">User asks question ‚Üí System generates SQL</div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">Expert reviews ‚Üí Clicks üëç or üëé</div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">If üëç: Index (question, SQL) pair into gold dataset vector store</div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">Future queries ‚Üí Retrieve similar pairs as few-shot examples</div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">LLM generates SQL with reference examples</div>
                </div>
            </div>
        </div>

        <!-- Slide 21: Benchmark Metrics -->
        <div class="slide" data-slide="21">
            <div class="slide-title">Key Metrics for<br>System Evaluation</div>
            <div class="content">
                <div class="metric-card">
                    <div class="metric-title">Table Recall</div>
                    <div>Percentage of gold tables retrieved by RAG</div>
                    <div class="metric-formula">Table Recall = |Retrieved ‚à© Gold| / |Gold|</div>
                </div>
                <div class="metric-card">
                    <div class="metric-title">Execution Success Rate</div>
                    <div>Percentage of queries that execute without error</div>
                    <div class="metric-formula">Execution Success = Successful Queries / Total Queries</div>
                </div>
                <div class="metric-card">
                    <div class="metric-title">Semantic Score</div>
                    <div>AST-based SQL similarity measurement</div>
                    <div class="metric-formula">Semantic Score = 1 - (AST Diff Nodes / Total AST Nodes)</div>
                </div>
            </div>
        </div>

        <!-- Slide 22: Additional Evaluation Metrics -->
        <div class="slide" data-slide="22">
            <div class="slide-title">Additional Evaluation<br>Metrics</div>
            <div class="content" style="justify-content: flex-start; margin-top: 1rem; gap: 1rem;">
                <div class="metric-card" style="padding: 1rem 1.5rem;">
                    <div class="metric-title">Record Count Match</div>
                    <div>Verifies the generated SQL returns the correct number of rows</div>
                    <div class="metric-formula">Match = (Generated Row Count == Expected Row Count)</div>
                    <div class="code-block" style="margin-top: 1rem;">Example:<br>
                        Expected: 150 orders | Generated SQL: 150 rows ‚Üí ‚úÖ Match<br>
                        Expected: 150 orders | Generated SQL: 148 rows ‚Üí ‚ùå Mismatch</div>
                </div>
                <div class="metric-card">
                    <div class="metric-title">Expected Answer Match</div>
                    <div>Compares actual result values with ground truth answers</div>
                    <div class="metric-formula">Match = (Generated Results ‚äÜ Expected Results)</div>
                    <div class="code-block" style="margin-top: 1rem;">Example:<br>
                        Expected: Total Sales = $1,234,567.89<br>
                        Generated: Total Sales = $1,234,567.89 ‚Üí ‚úÖ Match<br>
                        Generated: Total Sales = $1,234,500.00 ‚Üí ‚ùå Mismatch</div>
                </div>
                <div class="metric-card">
                    <div class="metric-title">Primary Keys Match</div>
                    <div>Ensures correct entity identification regardless of column order</div>
                    <div class="metric-formula">Match = (Generated PKs == Expected PKs)</div>
                    <div class="code-block" style="margin-top: 1rem;">Example:<br>
                        Expected PKs: [101, 102, 103] (Top 3 customers by revenue)<br>
                        Generated PKs: [101, 102, 103] ‚Üí ‚úÖ Match<br>
                        Generated PKs: [101, 104, 105] ‚Üí ‚ùå Mismatch (wrong entities)</div>
                </div>
            </div>
        </div>

        <!-- Slide 23: Benchmark Results -->
        <div class="slide" data-slide="23">
            <div class="slide-title">System Performance<br>Results</div>
            <div class="content">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">377</div>
                        <div class="stat-label">Total Queries</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">96.16%</div>
                        <div class="stat-label">Table Recall</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">88.86%</div>
                        <div class="stat-label">Execution Success</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">66.44%</div>
                        <div class="stat-label">Semantic Score</div>
                    </div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Difficulty</th>
                                <th>Count</th>
                                <th>Table Recall</th>
                                <th>Exec Success</th>
                                <th>Semantic Score</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Basic</td>
                                <td>192</td>
                                <td>99.39%</td>
                                <td>98.44%</td>
                                <td>73.60%</td>
                            </tr>
                            <tr>
                                <td>Intermediate</td>
                                <td>97</td>
                                <td>93.28%</td>
                                <td>87.63%</td>
                                <td>62.65%</td>
                            </tr>
                            <tr>
                                <td>Advanced</td>
                                <td>88</td>
                                <td>92.27%</td>
                                <td>69.32%</td>
                                <td>54.98%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Slide 24: RAG Impact Analysis -->
        <div class="slide" data-slide="24">
            <div class="slide-title">Proving the<br>Value of RAG</div>
            <div class="content">
                <div class="highlight-box">
                    <strong>Key Insight:</strong> High table recall (96%+) enables accurate SQL generation
                </div>
                <div class="chart-container">
                    <div class="bar-chart">
                        <div class="bar-row">
                            <div class="bar-label">Basic</div>
                            <div class="bar"
                                style="width: 99.39%; background: linear-gradient(90deg, var(--color-accent), #32ff7e);">
                                <div class="bar-value">99.39% Recall ‚Üí 98.44% Success</div>
                            </div>
                        </div>
                        <div class="bar-row">
                            <div class="bar-label">Intermediate</div>
                            <div class="bar"
                                style="width: 93.28%; background: linear-gradient(90deg, var(--color-secondary), var(--color-tertiary));">
                                <div class="bar-value">93.28% Recall ‚Üí 87.63% Success</div>
                            </div>
                        </div>
                        <div class="bar-row">
                            <div class="bar-label">Advanced</div>
                            <div class="bar"
                                style="width: 92.27%; background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));">
                                <div class="bar-value">92.27% Recall ‚Üí 69.32% Success</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="highlight-box">
                    Each 5% improvement in recall ‚âà 8% improvement in execution success
                </div>
            </div>
        </div>

        <!-- Slide 25: Latency Breakdown -->
        <div class="slide" data-slide="25">
            <div class="slide-title">Performance &<br>Latency Analysis</div>
            <div class="content">
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Stage</th>
                                <th>Avg (ms)</th>
                                <th>Median (ms)</th>
                                <th>Max (ms)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Retrieval</td>
                                <td>130</td>
                                <td>101</td>
                                <td>845</td>
                            </tr>
                            <tr style="background: rgba(255, 71, 87, 0.1);">
                                <td><strong>Generation</strong></td>
                                <td><strong>35,352</strong></td>
                                <td><strong>35,800</strong></td>
                                <td><strong>88,464</strong></td>
                            </tr>
                            <tr>
                                <td>Execution</td>
                                <td>68</td>
                                <td>39</td>
                                <td>1,676</td>
                            </tr>
                            <tr style="background: rgba(2, 195, 154, 0.1);">
                                <td><strong>Total</strong></td>
                                <td><strong>35,556</strong></td>
                                <td><strong>35,919</strong></td>
                                <td><strong>88,707</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="highlight-box warning">
                    ‚ö†Ô∏è Key Observation:<br>
                    1. Generation dominates latency (self-hosted LLM)<br>
                    2. Retrieval + Execution: &lt;200ms | Generation: ~35 seconds
                </div>
            </div>
        </div>

        <!-- Slide 26: Error Analysis -->
        <div class="slide" data-slide="26">
            <div class="slide-title">Understanding<br>Failure Cases</div>
            <div class="content">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">19</div>
                        <div class="stat-label">Runtime Errors (45%)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">15</div>
                        <div class="stat-label">Driver Errors (36%)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">8</div>
                        <div class="stat-label">Syntax Errors (19%)</div>
                    </div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Difficulty Level</th>
                                <th>Driver</th>
                                <th>Runtime</th>
                                <th>Syntax</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Basic</td>
                                <td>1</td>
                                <td>2</td>
                                <td>0</td>
                            </tr>
                            <tr>
                                <td>Intermediate</td>
                                <td>3</td>
                                <td>8</td>
                                <td>1</td>
                            </tr>
                            <tr style="background: rgba(255, 71, 87, 0.1);">
                                <td><strong>Advanced</strong></td>
                                <td><strong>11</strong></td>
                                <td><strong>9</strong></td>
                                <td><strong>7</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="highlight-box">
                    Advanced queries account for 64% of all errors despite being only 23% of queries
                </div>
            </div>
        </div>

        <!-- Slide 27: SQL AST Difference Distribution -->
        <div class="slide" data-slide="27">
            <div class="slide-title">SQL AST Difference Count Distribution</div>
            <div class="content">
                <img src="images/ast_difference_distribution.png"
                    alt="SQL AST Difference Count Distribution by Difficulty Level">
            </div>
        </div>

        <!-- Slide 28: Error Rate Distribution -->
        <div class="slide" data-slide="28">
            <div class="slide-title">Error Rate Distribution</div>
            <div class="content">
                <img src="images/error_rate_distribution.png" alt="Error Rate Distribution by Difficulty Level">
            </div>
        </div>

        <!-- Slide 29: Retry Distribution -->
        <div class="slide" data-slide="29">
            <div class="slide-title">Retry Distribution</div>
            <div class="content">
                <img src="images/retry_distribution.png" alt="Retry Distribution by Difficulty Level">
            </div>
        </div>

        <!-- Slide 30: Table Recall Average -->
        <div class="slide" data-slide="30">
            <div class="slide-title">Table Recall Average</div>
            <div class="content">
                <img src="images/table_recall_average.png" alt="Table Recall Average by Difficulty Level">
            </div>
        </div>

        <!-- Slide 31: Future Improvements -->
        <div class="slide" data-slide="31">
            <div class="slide-title">Roadmap for<br>Enhanced Accuracy</div>
            <div class="content">
                <ul class="bullet-list">
                    <li><strong>Multi-hop Reasoning:</strong> 2-hop FK traversal for complex JOINs</li>
                    <li><strong>Reranker Integration:</strong> Cross-encoder reranking for table selection</li>
                    <li><strong>Query Decomposition:</strong> Break complex questions into sub-queries</li>
                    <li><strong>Dialect Fine-tuning:</strong> Custom T-SQL fine-tuned model</li>
                    <li><strong>Caching Layer:</strong> LRU cache for common query patterns</li>
                </ul>
                <div class="highlight-box">
                    Target: 95%+ execution success rate across all difficulty levels
                </div>
            </div>
        </div>

        <!-- Slide 32: Summary -->
        <div class="slide" data-slide="32">
            <div class="slide-title">Key Takeaways</div>
            <div class="content">
                <ul class="bullet-list">
                    <li><span class="checkmark">‚úÖ</span> RAG-based Schema Linking solves context overflow</li>
                    <li><span class="checkmark">‚úÖ</span> SQL-specialized LLMs outperform general models</li>
                    <li><span class="checkmark">‚úÖ</span> Column-first retrieval improves recall accuracy</li>
                    <li><span class="checkmark">‚úÖ</span> Self-healing loop handles edge cases</li>
                    <li><span class="checkmark">‚úÖ</span> Continuous feedback enables improvement</li>
                </ul>
                <div class="stats-grid" style="margin-top: 3rem;">
                    <div class="stat-card">
                        <div class="stat-value">96%</div>
                        <div class="stat-label">Table Recall</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">89%</div>
                        <div class="stat-label">Execution Success</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">377</div>
                        <div class="stat-label">Queries Tested</div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Slide 33: Live Demo -->
        <div class="slide" data-slide="33">
            <div class="slide-title">Live Demo</div>
            <div class="content">
                <div class="highlight-box" style="text-align: center; font-size: 3rem; margin-top: 2rem; color: cyan;">
                    Quick demonstration...
                </div>
            </div>
        </div>
        <!-- Slide 34: Q&A -->
        <div class="slide" data-slide="34">
            <div class="slide-title">Q&A</div>
            <div class="content">
                <div class="highlight-box" style="text-align: center; font-size: 8rem; margin-top: 2rem; animation: glow 4s ease-in-out infinite;">
                    Questions?
                </div>
            </div>
        </div>
        <!-- Slide 35: References -->
        <div class="slide" data-slide="35">
            <div class="slide-title">References</div>
            <div class="content">
                <ul class="bullet-list">
                    <li>SQLova: https://arxiv.org/abs/1809.08887</li>
                    <li>RAG: https://arxiv.org/abs/2005.11401</li>
                    <li>LangChain: https://langchain.com/</li>
                    <li>OpenAI GPT-4: https://openai.com/research/gpt-4</li>
                    <li>Microsoft SQL Server Documentation: https://docs.microsoft.com/en-us/sql/sql-server/</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Configuration - single source of truth
        const CONFIG = {
            totalSlides: document.querySelectorAll('.slide').length  // Dynamically count slides
        };

        let currentSlide = 1;

        // Initialize presentation
        function initPresentation() {
            const slides = document.querySelectorAll('.slide');

            // Add grid background and slide numbers dynamically
            slides.forEach((slide, index) => {
                // Add grid background
                const gridBg = document.createElement('div');
                gridBg.className = 'grid-background';
                slide.insertBefore(gridBg, slide.firstChild);

                // Add slide number
                const slideNum = document.createElement('div');
                slideNum.className = 'slide-number';
                slideNum.textContent = `${index + 1} / ${CONFIG.totalSlides}`;
                slide.appendChild(slideNum);
            });

            showSlide(currentSlide);
        }

        function showSlide(n) {
            const slides = document.querySelectorAll('.slide');
            const progress = document.getElementById('progress');

            if (n > CONFIG.totalSlides) { currentSlide = CONFIG.totalSlides; }
            if (n < 1) { currentSlide = 1; }

            slides.forEach(slide => {
                slide.classList.remove('active');
            });

            slides[currentSlide - 1].classList.add('active');

            const progressWidth = (currentSlide / CONFIG.totalSlides) * 100;
            progress.style.width = progressWidth + '%';
        }

        function changeSlide(n) {
            currentSlide += n;
            showSlide(currentSlide);
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') changeSlide(-1);
            if (e.key === 'ArrowRight') changeSlide(1);
        });

        // Initialize on load
        document.addEventListener('DOMContentLoaded', initPresentation);
    </script>
</body>

</html>